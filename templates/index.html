<html>
    <head>
        <style>
            #map {
                height: 90%;
                width: 100%;
            }

            #get-tweet {
                font-size: 20;
                margin-top: 5px;
            }
        </style>
    </head>
    <body>

        <script src="https://maps.googleapis.com/maps/api/js?libraries=places"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
        <script>
            function initialize() {
                var mapOptions = {
                    center: { lat: 37.7833, lng: -122.4167},
                    zoom: 4
                };

                map = new google.maps.Map(document.getElementById('map'), mapOptions);

                $("#get-tweet").on('click', getTweet);
            }

            google.maps.event.addDomListener(window, 'load', initialize)

            function getTweet() {
                $.get(
                    '/get-tweet',
                    function(response) {
                        console.log(response);
                        addMarker(response.latitude, response.longitude, response.text);
                    }
                );
            }

            function addMarker(lat, lng, text) {
                var latlng = new google.maps.LatLng(lat, lng);
                console.log(latlng);

                var marker = new google.maps.Marker({
                    position: latlng,
                    map: map
                });

                map.setCenter(latlng);

                var contentString = text;

                var infowindow = new google.maps.InfoWindow({
                    content: contentString
                })

                infowindow.open(map, marker);
                setTimeout(function() {
                    infowindow.close();
                }, 5000);
            }

        </script>

        <div id="map"></div>
        <div>
            <button id="get-tweet">Get Tweet</button>
        </div>
        <div id="temp-input">
        </div>

    </body>
</html>